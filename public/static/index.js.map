{
  "version": 3,
  "sources": ["../../assets/js/index.js"],
  "sourcesContent": ["import '../css/index.css';\n\nconst apiUrl = window.location.origin;\nlet activeEnv = {};\n\nconst addConsumerCard = (t) => {\n    const parent = document.getElementById('consumer-cards');\n\n    const list = document.createElement('DIV');\n    list.classList.add('list-group');\n\n    const title = document.createElement('H5');\n    title.classList.add('card-title');\n    title.innerText = t.value;\n\n    const body = document.createElement('DIV');\n    body.classList.add('card-body');\n\n    const card = document.createElement('DIV');\n    card.classList.add('card');\n    card.classList.add('bg-dark');\n\n    body.appendChild(title);\n    body.appendChild(list);\n    card.appendChild(body);\n    parent.appendChild(card);\n};\n\nconst addGroupToList = (g, l, cb) => {\n    const node = document.createElement('DIV');\n    node.setAttribute('id', g.name);\n    node.classList.add('list-group-item');\n    node.classList.add('list-group-item-action');\n    node.ondblclick = cb;\n\n    const textnode = document.createTextNode(g.description);\n    node.appendChild(textnode);\n\n    l.appendChild(node);\n};\n\nconst addTopicToList = (t, l, cb) => {\n    const node = document.createElement('DIV');\n    node.setAttribute('id', t.key);\n    node.classList.add('list-group-item');\n    node.classList.add('list-group-item-action');\n    node.ondblclick = cb;\n\n    const textnode = document.createTextNode(t.value);\n    node.appendChild(textnode);\n\n    l.appendChild(node);\n};\n\nconst clearTopicsAndGroups = () => {\n    document.getElementById('available-groups').innerHTML = '';\n    document.getElementById('available-topics').innerHTML = '';\n    document.getElementById('selected-groups').innerHTML = '';\n    document.getElementById('selected-topics').innerHTML = '';\n};\n\nconst removeElement = (id) => {\n    const elem = document.getElementById(id);\n    elem.parentNode.removeChild(elem);\n};\n\nconst removeAllCards = () => {\n    const parent = document.getElementById('consumer-cards');\n    parent.innerHTML = '';\n};\n\nconst selectGroup = (event) => {\n    const id = event.target.id;\n    removeElement(id);\n\n    const groupsList = document.getElementById('selected-groups');\n    const g = activeEnv.groups.find((g) => g.name === id);\n    addGroupToList(g, groupsList, unselectGroup);\n\n    g.keys.forEach((k) => {\n        selectTopic({ target: { id: k } });\n    });\n};\n\nconst selectTopic = (event) => {\n    const id = event.target.id;\n    removeElement(id);\n\n    const list = document.getElementById('selected-topics');\n    const t = activeEnv.topics.find((t) => t.key === id);\n    addTopicToList((t), list, unselectTopic);\n};\n\nconst unselectGroup = (event) => {\n    const id = event.target.id;\n    removeElement(id);\n\n    const groupsList = document.getElementById('available-groups');\n    const g = activeEnv.groups.find((g) => g.name === id);\n    addGroupToList(g, groupsList, selectGroup);\n\n    g.keys.forEach((k) => {\n        unselectTopic({ target: { id: k } });\n    });\n};\n\nconst unselectTopic = (event) => {\n    const id = event.target.id;\n    removeElement(id);\n\n    const list = document.getElementById('available-topics');\n    const t = activeEnv.topics.find((t) => t.key === id);\n    addTopicToList(t, list, selectTopic);\n};\n\nconst populateAvailable = () => {\n    clearTopicsAndGroups();\n\n    const groupsList = document.getElementById('available-groups');\n    activeEnv.groups.forEach((g) => addGroupToList(g, groupsList, selectGroup));\n\n    const topicsList = document.getElementById('available-topics');\n    activeEnv.topics.forEach((t) => addTopicToList(t, topicsList, selectTopic));\n};\n\nwindow.addSelectedCards = async () => {\n    removeAllCards();\n    const parent = document.getElementById('selected-topics');\n    let list = parent.querySelectorAll('div');\n    list = Array.from(list)\n    list.forEach((l) => {\n        const t = activeEnv.topics.find((t) => t.key === l.id);\n        addConsumerCard(t);\n    });\n\n    const topicKeys = list.map((l) => l.id);\n    try {\n        const method = 'POST';\n        const body = JSON.stringify({ env: activeEnvironment, topicKeys });\n        await fetch(`${apiUrl}/consumers`, { method, body });\n    } catch (e) {\n        console.error(e);\n    }\n};\n\nwindow.checkIfValidEnvironment = async (sel) => {\n    const { value } = sel;\n\n    if (value !== '') {\n        try {\n            const res = await fetch(`${apiUrl}/envs/${value}`);\n            activeEnv = await res.json();\n            console.log(activeEnv);\n\n            populateAvailable();\n        } catch (e) {\n            console.error(e);\n        }\n        // document.getElementById(\"produce-btn\").disabled = false;\n        document.getElementById('clear-contents-btn').disabled = false;\n    } else {\n        // document.getElementById(\"produce-btn\").disabled = true;\n        document.getElementById('clear-contents-btn').disabled = true;\n\n        clearTopicsAndGroups();\n\n        activeEnv = {};\n    }\n};\n\nwindow.resetConsumers = () => {\n    removeAllCards();\n    populateAvailable();\n};\n\nexport default populateAvailable;\n"],
  "mappings": "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",
  "names": []
}
